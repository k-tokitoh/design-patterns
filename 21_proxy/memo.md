# 感想

- proxy というのは代理で能動的に何かを行う者のこと
- よく proxy server と reverse proxy server で混乱していたが、"能動的に"というイメージがあると区別できる
- proxy が適した場面で proxy を発想できていたかは自信ないな
- 以下の場面で proxy を発想できるとよい
  - 「重たい処理をまだ必要ない時点で実行しちゃっているな...」
    - virtual proxy で重い処理の実行タイミングを遅延させよう！
  - 「毎回ネットワーク越しの通信をしなくてもいいんだけどな...」
    - remote proxy で、一部の処理はローカルで捌いちゃおう！
  - 「このクラス巨大だな...メインのロジックに加えて、"そのロジックを誰が呼び出せるか"というアクセス制御のロジックも抱えているんだな」
    - access proxy で、アクセス制御は別クラスに切り出そう！

# 練習問題

## 1

- PrinterProxy を初期化する時点で、利用者が本体の実装を指定する = PrinterProxy は Printer に依存しないように変更した。

## 2

- java の`synchronized`は、そのメソッドを実行できるスレッドを 1 つだけに制限する
- この例で proxy は real と sync していることが重要だが、synchronized をつかわないと以下が起こる
  - setPrinterName で「real がないから → proxy が name を保持しておく」という処理をしている途中、右矢印の部分で別のスレッドににより realize が呼ばれる
  - すると real は古い name を、proxy は新しい name を保持することになりズレてしまう
